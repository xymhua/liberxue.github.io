---
layout: blog
istop: true
title: "线程安全问题"
background-image: /yiliya.png
date:  2018-02-01
category: java
tags: 多线程
---

如何判断线程是否安全?<br />
A:是否是多线程环境?<br />
    如果不是多线程环境就不会出问题<br />
B:是否有共享数据?<br />
C:是否多条语句操作共享数据？<br />
<br />
A与B很难更改，但是我们可以改变C。<br />
<br />
解决方法:<br />
        synchronized(对象) { <br />
           需要同步的代码; <br />
        }<br />
这里对象其实就是一把锁，多个线程用同一个对象，也就是同一把锁，一个线程进去了，另一个线程就被锁住进不去了！<br />
<br />
我自己的看法，当一个线程进入同步代码块时，同步代码块就被锁住，其他线程就无法进入，只能等待这个线程离开同步代码块。<br />
<br />
例子:火车上厕所<br /><br />
     在火车上有很多人，只有一个厕所，进去的人会把门锁住，直到他出来为止别人都无法进入。<br />
<br />
总结:<br />
     将不安全的代码用同步代码块包住，也就是多条语句操作共享数据的代码！<br />
